# https://docs.pytest.org/en/7.1.x/reference/reference.html#configuration-options

[pytest]
# https://docs.pytest.org/en/stable/how-to/doctest.html
# https://docs.pytest.org/en/stable/example/pythoncollection.html#ignore-paths-during-test-collection
addopts =
    --strict-markers --capture=no --tb=short
    --ignore=ci --ignore=codeserver --ignore=jupyter --ignore=rstudio
    --doctest-modules

# https://docs.pytest.org/en/stable/example/pythoncollection.html#changing-directory-recursion
norecursedirs = .git

# pytest-subtest plugin is built-in since pytest 9.0: https://docs.pytest.org/en/stable/how-to/subtests.html
required_plugins =

junit_logging = all
junit_log_passing_tests = False

log_cli = True
log_cli_date_format = %Y-%m-%d %H:%M:%S
log_cli_format = %(asctime)s %(levelname)s %(message)s
log_cli_level = INFO

log_file = logs/pytest-logs.txt
log_file_level = DEBUG

# https://docs.pytest.org/en/stable/example/markers.html#registering-markers
markers =
    openshift: requires openshift to run,
    cuda: requires cuda to run,
    rocm: requires rocm to run,
    buildonlytest: runs inside docker build,
