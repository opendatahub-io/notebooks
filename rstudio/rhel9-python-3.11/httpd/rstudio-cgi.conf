# RStudio-server CGI configuration
# This configuration handles the /api/ endpoints for culling and health checks

# Set the CGI script paths
ScriptAlias /api/kernels/ /opt/app-root/api/kernels/access.cgi
ScriptAlias /api/probe /opt/app-root/api/probe.cgi
ScriptAlias /api /opt/app-root/api/probe.cgi

# Enable CGI for the API endpoints
<LocationMatch "^/api/?">
    SetHandler cgi-script
    Options +ExecCGI
    Require all granted
</LocationMatch>

# Ensure the CGI scripts are executable
<Directory "/opt/app-root/api">
    Options +ExecCGI
    AddHandler cgi-script .cgi
    Require all granted
</Directory>

<Directory "/opt/app-root/api/kernels">
    Options +ExecCGI
    AddHandler cgi-script .cgi
    Require all granted
</Directory>
